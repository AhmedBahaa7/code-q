FROM node:18-slim

RUN apt-get update -y && apt-get install -y \
    ca-certificates \
    bzip2 \
    curl \
    libfontconfig \
    --no-install-recommends && \
    rm -rf /var/lib/apt/lists/*

RUN yarn global add phantomjs-prebuilt

WORKDIR /app
COPY . /app

RUN chmod +x /app/tests.sh

EXPOSE 8081

CMD ["/app/tests.sh"]
